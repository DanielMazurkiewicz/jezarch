/* src/components/ui/Select.module.css */
@keyframes slideDown {
    from { opacity: 0; transform: translateY(-5px); }
    to   { opacity: 1; transform: translateY(0); }
}
@keyframes slideUp {
    from { opacity: 1; transform: translateY(0); }
    to   { opacity: 0; transform: translateY(-5px); }
}
@keyframes fadeOut {
    from { opacity: 1; } to { opacity: 0; }
}

.selectTriggerBase {
    display: inline-flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--spacing-sm);
    width: 100%;
    height: 36px;
    border-radius: var(--radius-md);
    border-width: var(--borderWidth-sm);
    border-style: solid; /* Added */
    border-color: var(--color-input);
    background-color: var(--color-background);
    padding-left: var(--spacing-sm);
    padding-right: var(--spacing-sm);
    font-size: var(--fontSize-sm);
    color: var(--color-foreground);
    transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
    cursor: pointer;
    outline: none;
    line-height: 1;
    box-shadow: var(--shadow-sm);
    user-select: none;
}
.selectTriggerBase[data-placeholder="true"] > span:first-child { /* Target value span */
    color: var(--color-muted-foreground);
}
.selectTriggerBase:focus-visible {
    border-color: var(--color-ring);
    box-shadow: 0 0 0 2px var(--color-background), 0 0 0 4px var(--color-ring);
}
.selectTriggerBase:disabled,
.selectTriggerBase[aria-disabled="true"] {
    opacity: 0.5;
    cursor: not-allowed;
}
.selectTriggerBase[aria-invalid="true"] {
    border-color: hsl(var(--destructive));
    box-shadow: 0 0 0 2px var(--color-background), 0 0 0 4px hsl(var(--destructive) / 0.4);
}

/* Size variants */
.sizeSm { height: 32px; padding-left: var(--spacing-xs); padding-right: var(--spacing-xs); font-size: var(--fontSize-xs); }


.selectValue {
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
}

.selectIcon {
    flex-shrink: 0;
    opacity: 0.5;
    color: var(--color-muted-foreground);
    width: 1rem;
    height: 1rem;
}

.selectContent {
    /* position: fixed; Handled by JS + Portal */
    z-index: var(--zIndex-popover);
    min-width: var(--trigger-width); /* Set dynamically */
    max-width: calc(100vw - 2rem);
    max-height: 250px;
    overflow: hidden;
    border-radius: var(--radius-md);
    border: var(--borderWidth-sm) solid var(--color-border);
    background-color: var(--color-popover);
    color: var(--color-popover-foreground);
    box-shadow: var(--shadow-md);
}
.selectContent[data-state="open"] { animation: slideDown 150ms ease-out; }
.selectContent[data-state="closed"] { animation: slideUp 150ms ease-in; }


.selectViewport {
    padding: var(--spacing-xs);
    width: 100%;
    height: 100%;
    overflow-y: auto;
    /* Scrollbar styling */
    scrollbar-width: thin;
    scrollbar-color: var(--color-border) var(--color-popover);
}
.selectViewport::-webkit-scrollbar { width: 6px; }
.selectViewport::-webkit-scrollbar-track { background: var(--color-popover); }
.selectViewport::-webkit-scrollbar-thumb { background-color: var(--color-border); border-radius: var(--radius-lg); }


.selectItemBase {
    position: relative;
    display: flex;
    align-items: center;
    width: 100%;
    border-radius: var(--radius-sm);
    padding-top: var(--spacing-xs);
    padding-bottom: var(--spacing-xs);
    padding-left: var(--spacing-sm);
    padding-right: var(--spacing-lg);
    font-size: var(--fontSize-sm);
    outline: none;
    cursor: default;
    transition: background-color 0.1s ease-in-out, color 0.1s ease-in-out;
    user-select: none;
}
.selectItemBase:hover,
.selectItemBase:focus,
.selectItemBase[data-highlighted="true"] {
    background-color: var(--color-accent);
    color: var(--color-accent-foreground);
}
.selectItemBase[aria-disabled="true"],
.selectItemBase[data-disabled] {
    opacity: 0.5;
    pointer-events: none;
    cursor: not-allowed;
}

.selectItemIndicator {
    position: absolute;
    display: flex;
    align-items: center;
    justify-content: center;
    right: var(--spacing-sm);
    width: 1rem;
    height: 1rem;
}

.selectCheckIcon {
    width: 1em;
    height: 1em;
}

.selectLabel {
    padding-left: var(--spacing-sm);
    padding-right: var(--spacing-sm);
    padding-top: var(--spacing-xs);
    padding-bottom: var(--spacing-xs);
    font-size: var(--fontSize-xs);
    font-weight: var(--fontWeight-semibold);
    color: var(--color-muted-foreground);
}

.selectSeparator {
    height: 1px;
    background-color: var(--color-border);
    margin-left: calc(-1 * var(--spacing-xs));
    margin-right: calc(-1 * var(--spacing-xs));
    margin-top: var(--spacing-xs);
    margin-bottom: var(--spacing-xs);
}